{"version":3,"file":"main.js","mappings":"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","sources":["webpack://yandex_practikum/./src/scripts/components/modal.js","webpack://yandex_practikum/./src/scripts/components/card.js","webpack://yandex_practikum/./src/scripts/components/validation.js","webpack://yandex_practikum/./src/scripts/components/api.js","webpack://yandex_practikum/./src/index.js"],"sourcesContent":["//закрытие попапа с помощью Esc\r\nconst closeModalEscape = (evt) => {\r\n    if (evt.key === 'Escape') {\r\n        const openedPopup = document.querySelector('.popup_is-opened')\r\n        closeModal(openedPopup)\r\n    }\r\n}\r\n\r\n// функция попап ОТРКЫТИЕ\r\nconst openModal = (element) => {\r\n    element.classList.add('popup_is-opened')\r\n    //вешаю обработчик для Esc\r\n    document.addEventListener('keydown', closeModalEscape)\r\n}\r\n\r\n// функция попап ЗАКРЫТИЕ\r\nconst closeModal = (element) => {\r\n    element.classList.remove('popup_is-opened')\r\n    //снимаю обработчки для Esc\r\n    document.removeEventListener('keydown', closeModalEscape)\r\n}\r\n\r\n//закрытие попапа кликом вне элемента\r\nconst closeModalOverlay = (evt) => {\r\n    if (evt.target.classList.contains('popup')) {\r\n        closeModal(evt.target)\r\n    }\r\n}\r\n\r\nexport { openModal, closeModal, closeModalOverlay }","// @todo: Функция удаления карточки\r\nexport const removeCard = (card) => {\r\n    card.remove()\r\n}\r\n\r\n//функция лайка карточки\r\nexport const likeCard = (element) => {\r\n    element.classList.toggle('card__like-button_is-active')\r\n}\r\n\r\n// @todo: Функция создания карточки\r\nexport const createCard = (cardElement, params) => {\r\n    // @todo: Темплейт карточки\r\n    const cardTemplate = document.querySelector('#card-template').content;\r\n    const card = cardTemplate.querySelector('.card').cloneNode(true);\r\n    const cardImage = card.querySelector('.card__image');\r\n    const cardTitle = card.querySelector('.card__title');\r\n    const cardLikeCounter = card.querySelector('.card__like-counter')\r\n    const cardDeleteButton = card.querySelector('.card__delete-button');\r\n\r\n    //попробовать переделать функцию с распознаванием, \r\n    //является ли cardElement частью формы\r\n    cardImage.src = cardElement.link;\r\n    cardImage.alt = cardElement.name;\r\n    cardTitle.textContent = cardElement.name;\r\n    cardLikeCounter.textContent = cardElement.likes.length\r\n\r\n    //лайкнуть карточку\r\n    //сохранить цвет лайка на мною лайкнутых карточках\r\n    const cardLikeButton = card.querySelector('.card__like-button');\r\n    function handleLiking (ownerId, element) {\r\n        if (cardElement.likes.find(item => item._id === ownerId)) {\r\n            element.classList.add('card__like-button_is-active')\r\n        }\r\n    }\r\n\r\n    handleLiking(params.ownerId, cardLikeButton)\r\n\r\n\r\n    //слушатель лайка\r\n    cardLikeButton.addEventListener('click', () => params.handleLikeCard(cardLikeButton, cardElement._id, cardLikeCounter))\r\n\r\n    //увеличить картинку\r\n    cardImage.addEventListener('click', () => params.increaseImage(cardImage, cardTitle));\r\n    \r\n    //удалить карточку\r\n\r\n    function handleDeleteCard (cardElement, ownerId, cardDeleteButton) {\r\n        if (cardElement.owner._id !== ownerId) {\r\n            cardDeleteButton.remove()\r\n        } else {\r\n            cardDeleteButton.addEventListener('click', () => {\r\n                params.deleteCard(cardElement._id)\r\n                .then ((data) => {\r\n                    console.log(data)\r\n                    params.removeCard(card)\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err)\r\n                })\r\n            })\r\n        }\r\n    }\r\n    handleDeleteCard(cardElement, params.ownerId, cardDeleteButton)\r\n\r\n    return card;\r\n\r\n}\r\n\r\n","// сообщение об ошибке\r\nconst showInputError = (formElement, inputElement, errorMessage, validationConfig) => {\r\n    const errorElement = formElement.querySelector(`.${inputElement.name}-error`);\r\n    errorElement.classList.add(validationConfig.inputErrorClass);\r\n    errorElement.textContent = errorMessage;\r\n    inputElement.classList.add(validationConfig.errorClass);\r\n};\r\n  \r\nconst hideInputError = (formElement, inputElement, validationConfig) => {\r\n    const errorElement = formElement.querySelector(`.${inputElement.name}-error`);\r\n    errorElement.classList.remove(validationConfig.inputErrorClass);\r\n    inputElement.classList.remove(validationConfig.errorClass);\r\n    errorElement.textContent = '';\r\n};\r\n\r\n//проверка валидности формы\r\nconst checkInputValidity = (formElement, inputElement, validationConfig) => {\r\n    if (inputElement.validity.patternMismatch) {\r\n        // данные атрибута доступны у элемента инпута через ключевое слово dataset.\r\n        // обратите внимание, что в js имя атрибута пишется в camelCase (да-да, в\r\n        // HTML мы писали в kebab-case, это не опечатка)\r\n        inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n    } else {\r\n        inputElement.setCustomValidity(\"\");\r\n    };\r\n    if (!inputElement.validity.valid) {\r\n        showInputError(formElement, inputElement, inputElement.validationMessage, validationConfig);\r\n    } else {\r\n        hideInputError(formElement, inputElement, validationConfig);\r\n    };\r\n};\r\n\r\n//проверка валидностей полей\r\nconst hasInvalidInput = (inputList) => {\r\n    return inputList.some((inputElement) => {\r\n      return !inputElement.validity.valid;\r\n    })\r\n};\r\n\r\n\r\n//переключение кнопки\r\nconst toggleButtonState = (inputList, buttonElement, validationConfig) => {\r\n    if (hasInvalidInput(inputList)) {\r\n      buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n    } else {\r\n      buttonElement.classList.remove(validationConfig.inactiveButtonClass);\r\n    }\r\n};\r\n\r\n//переключение\r\nconst setEventListeners = (formElement, validationConfig) => {\r\n    const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n    const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n    toggleButtonState(inputList, buttonElement, validationConfig);\r\n    inputList.forEach((inputElement) => {\r\n      inputElement.addEventListener('input', function () {\r\n        checkInputValidity(formElement, inputElement, validationConfig);\r\n        toggleButtonState(inputList, buttonElement, validationConfig);\r\n      });\r\n    });\r\n};\r\n\r\n// включение валидации всех форм\r\nconst enableValidation = (validationConfig) => {\r\n    const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\r\n    formList.forEach((formElement) => {\r\n        formElement.addEventListener('submit', function (evt) {\r\n            evt.preventDefault();\r\n        });\r\n        setEventListeners(formElement, validationConfig);\r\n    });\r\n};\r\n\r\nconst clearValidation = (formElement, validationConfig) => {\r\n    const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n    const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n    buttonElement.classList.add(validationConfig.inactiveButtonClass)\r\n    inputList.forEach((inputElement) => {\r\n        hideInputError (formElement, inputElement, validationConfig)\r\n    });\r\n}\r\n\r\nexport {enableValidation, clearValidation}","const config = {\r\n    baseUrl: 'https://nomoreparties.co/v1/wff-cohort-24/',\r\n}\r\n\r\n//загрузка информации о пользователе с сервера\r\nexport const getUserName = () => {\r\n    return fetch(`${config.baseUrl}/users/me`, {\r\n        method: 'GET',\r\n        headers: {\r\n            authorization: 'c430b10e-6e02-4ef6-8316-b9743be3525c'\r\n        }\r\n    })\r\n    .then(res => {\r\n        if (res.ok) {\r\n            return res.json();\r\n          }\r\n          return Promise.reject(`Ошибка: ${res.status}`)\r\n    })\r\n} \r\n\r\n//отправка изменений данных профиля\r\nexport const editUserProfile = (name, about) => {\r\n    return fetch(`${config.baseUrl}/users/me`, {\r\n        method:'PATCH',\r\n        headers: {\r\n            authorization: 'c430b10e-6e02-4ef6-8316-b9743be3525c',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n            name: name,\r\n            about: about\r\n        })\r\n    })\r\n    .then(res => {\r\n        if (res.ok) {\r\n            return res.json();\r\n          }\r\n        return Promise.reject(`Ошибка: ${res.status}`)\r\n    })\r\n}\r\n\r\n//загрузка карточек с сервера\r\nexport const getInitialCards = () => {\r\n    return fetch(`${config.baseUrl}/cards`, {\r\n        method: 'GET',\r\n        headers: {\r\n            authorization: 'c430b10e-6e02-4ef6-8316-b9743be3525c',\r\n            'Content-Type': 'application/json'\r\n        }\r\n    })\r\n    .then(res => {\r\n        if (res.ok) {\r\n            return res.json();\r\n          }\r\n        return Promise.reject(`Ошибка: ${res.status}`)\r\n    })\r\n}\r\n\r\n//отправка данных о новой карточке\r\nexport const postNewCard = ({name, link}) => {\r\n    return fetch(`${config.baseUrl}/cards`, {\r\n        method: 'POST',\r\n        headers: {\r\n            authorization: 'c430b10e-6e02-4ef6-8316-b9743be3525c',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n            name: name,\r\n            link: link\r\n        })\r\n    })\r\n    .then(res => {\r\n        if (res.ok) {\r\n            return res.json();\r\n          }\r\n        return Promise.reject(`Ошибка: ${res.status}`)\r\n    })\r\n}\r\n\r\n//ставим лайк\r\nexport const putLike = (cardId) => {\r\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n            authorization: 'c430b10e-6e02-4ef6-8316-b9743be3525c',\r\n            'Content-Type': 'application/json'\r\n        },\r\n    })\r\n    .then(res => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`)\r\n    })\r\n}\r\n\r\n//удаляем лайк\r\nexport const deleteLike = (cardId) => {\r\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n            authorization: 'c430b10e-6e02-4ef6-8316-b9743be3525c',\r\n            'Content-Type': 'application/json'\r\n        },\r\n    })\r\n    .then(res => {\r\n        if (res.ok) {\r\n            return res.json();\r\n          }\r\n          return Promise.reject(`Ошибка: ${res.status}`)\r\n    })\r\n}\r\n\r\n//удаляем карточку\r\nexport const deleteCard = (cardId) => {\r\n    return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n            authorization: 'c430b10e-6e02-4ef6-8316-b9743be3525c',\r\n        },\r\n    })\r\n    .then(res => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`)\r\n    })\r\n}\r\n\r\n//меняем аватар\r\nexport const changeAvatar = (avatar) => {\r\n    return fetch(`${config.baseUrl}/users/me/avatar `, {\r\n        method: 'PATCH',\r\n        headers: {\r\n            authorization: 'c430b10e-6e02-4ef6-8316-b9743be3525c',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n            avatar: avatar\r\n        })\r\n    })\r\n    .then(res => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`)\r\n    })\r\n}","import '/src/pages/index.css';\n\nimport { openModal, closeModal, closeModalOverlay } from '/src/scripts/components/modal.js';\nimport {createCard, likeCard, removeCard} from '/src/scripts/components/card.js';\nimport {enableValidation, clearValidation} from '../src/scripts/components/validation.js'\nimport {getUserName, getInitialCards, editUserProfile, postNewCard, putLike, deleteLike, deleteCard, changeAvatar } from '../src/scripts/components/api.js'\n\n\n// @todo: DOM узлы\nconst placesList = document.querySelector('.places__list');\n//элементы\nconst popups = document.querySelectorAll('.popup');\nconst popupProfile = document.querySelector('.popup_type_edit');\nconst popupNewCard = document.querySelector('.popup_type_new-card');\nconst popupImage = document.querySelector('.popup__image');\nconst popupImageText = document.querySelector('.popup__caption');\nconst popupTypeImage = document.querySelector('.popup_type_image');\nconst avatarChangePopup = document.querySelector('.popup_change_avatar');\nconst profileTitle = document.querySelector('.profile__title');\nconst profileDescription = document.querySelector('.profile__description');\nconst profileImage = document.querySelector('.profile__image');\n//кнопки\nconst editButton = document.querySelector('.profile__edit-button');\nconst profileAddButton = document.querySelector('.profile__add-button');\nconst buttons = document.querySelectorAll('#button');\n//формы\nconst newPlaceForm = document.forms.newPlace;\nconst editProfileForm = document.forms.editProfile\nconst nameInput = editProfileForm.name;\nconst jobInput = editProfileForm.description;\nconst profileImageForm = document.forms.profileImage;\n//объект с настройками валидации\nconst validationConfig = {\n    formSelector: '.popup__form',\n    inputSelector: '.popup__input',\n    submitButtonSelector: '.popup__button',\n    inactiveButtonClass: 'popup__button_disabled',\n    inputErrorClass: 'popup__input_type_error',\n    errorClass: 'popup__error_visible',\n}\n\n\n//загрузка\nfunction renderLoading (isLoading) {\n    if (isLoading) {\n        buttons.forEach((buttonElement) => buttonElement.innerText = 'Загружается...')\n    } else {\n        buttons.forEach((buttonElement) => buttonElement.innerText = 'Сохранить')\n        \n    }\n}\n\n//общая функция лайка\nconst handleLikeCard = (cardLikeButton, id, cardLikeCounter) => {\n    if (cardLikeButton.classList.contains('card__like-button_is-active')) {\n        deleteLike(id)\n        .then (data => {\n            //отображение лайков карточки\n            cardLikeCounter.textContent = data.likes.length\n            likeCard(cardLikeButton)\n        })\n        .catch((err) => {\n            console.log(err)\n        })\n    } else {\n        putLike(id)\n        .then (data => {\n            //отображение лайков карточки\n            cardLikeCounter.textContent = data.likes.length\n            likeCard(cardLikeButton)\n        })\n        .catch((err) => {\n            console.log(err)\n        })\n    }\n}\n\n//открытие попапа формы изменения профиля\nconst openPopupProfileForm = () => {\n    //изменине значения плейсхолдера в редактировании имени и инфы о себе\n    nameInput.value = profileTitle.textContent;\n    jobInput.value = profileDescription.textContent;\n    // включение валидации вызовом enableValidation\n    // все настройки передаются при вызове\n    enableValidation(validationConfig);\n    clearValidation(editProfileForm, validationConfig)\n    openModal(popupProfile)\n}\n\n// отправка формы изменения профиля\nconst handleProfileFormSubmit = (evt) => {\n    evt.preventDefault();\n    renderLoading(true)\n    \n    // Получите значение полей jobInput и nameInput из свойства value\n    const userName = nameInput.value;\n    const userJob = jobInput.value;\n\n    // Вставьте новые значения\n    editUserProfile(userName, userJob)\n    .then((data) => {\n        profileTitle.textContent = data.name;\n        profileDescription.textContent = data.about;\n\n        closeModal(popupProfile);\n        editProfileForm.reset();\n    })\n    .catch ((err) => {\n        console.log(err);\n    })\n    .finally (() => renderLoading(false))\n\n    \n}\n//функция клика по изображению\nconst increaseImage = (image, text) => {\n    \n    popupImage.src = image.src;\n    popupImage.alt = image.alt;\n    popupImageText.textContent = text.textContent;\n\n    openModal(popupTypeImage)\n}\n\n//объект параметров для createCard\nconst params = {\n    removeCard: removeCard, \n    deleteCard: deleteCard, \n    ownerId: '1f9f7c9071d9a15cea3537ff', \n    openModal: openModal,\n    closeModal: closeModal,\n    handleLikeCard: handleLikeCard,\n    increaseImage: increaseImage,\n}\n\n//функция добавления карточки в разметку через попап\nconst handleCardFormSubmit = (evt) => {\n    evt.preventDefault();\n    const newPlaceCard = {\n        name: newPlaceForm.name.value,\n        link: newPlaceForm.link.value\n    }\n\n    renderLoading(true)\n\n    postNewCard(newPlaceCard)\n    .then((data) => {\n        placesList.prepend(createCard(\n            data,\n            params\n        ));\n    })\n    .then (() => {\n        clearValidation(newPlaceForm, validationConfig);\n        closeModal(popupNewCard)    \n        newPlaceForm.reset();\n    })\n    .catch((err) => {\n        console.log(err)\n    })\n    .finally (() => renderLoading(false))\n}\n\n//вывожу инфу о профиле и все карточки\nPromise.all([getUserName(), getInitialCards()])\n.then ((data) => {\n    profileTitle.textContent = data[0].name;\n    profileDescription.textContent = data[0].about;\n    profileImage.style = `background-image: url(\"${data[0].avatar}\")`\n    return data[1].forEach ((cardElement) => {\n        placesList.append(createCard(cardElement, params));\n    });\n})\n.catch ((err) => {\n    console.log(err);\n})\n\n// Прикрепляем обработчик к форме: он будет следить за событием “submit” - «отправка»\neditProfileForm.addEventListener('submit', handleProfileFormSubmit); \n\n//слушатель добавления новой карточки через форму\nnewPlaceForm.addEventListener('submit', handleCardFormSubmit);\n\n//перебор массива popup и процесс закрытия попапов\npopups.forEach((element) => {\n    //закрытие попапа кнопкой\n    const closeButton = element.querySelector('.popup__close')\n    closeButton.addEventListener('click', () => closeModal(element))\n    //закрытие попапа кликом вне элемента\n    element.addEventListener('click', closeModalOverlay)\n})\n\n// открытие попапов в шапке сайта\n//(изменение профиля, добавление карточки, изменение аватара)\neditButton.addEventListener('click', openPopupProfileForm);\nprofileAddButton.addEventListener('click', () => {\n    openModal(popupNewCard);\n    enableValidation(validationConfig);\n});\nprofileImage.addEventListener('click', () => {\n    clearValidation(profileImageForm, validationConfig)\n    openModal(avatarChangePopup);\n    enableValidation(validationConfig)\n})\n\n//изменение аватара\nprofileImageForm.addEventListener('submit', () => {\n    renderLoading(true)\n    changeAvatar(profileImageForm.image.value)\n    .then (data => {\n        profileImage.style = `background-image: url(\"${data.avatar}\")`;\n        closeModal(avatarChangePopup)\n        profileImageForm.reset();\n    })\n    .catch ((err) => {\n        console.log(err);\n    })\n    .finally (() => renderLoading(false))\n\n})\n\n"],"names":["closeModalEscape","evt","key","openedPopup","document","querySelector","closeModal","openModal","element","classList","add","addEventListener","remove","removeEventListener","closeModalOverlay","target","contains","likeCard","toggle","createCard","cardElement","params","card","content","cloneNode","cardImage","cardTitle","cardLikeCounter","cardDeleteButton","src","link","alt","name","textContent","likes","length","ownerId","cardLikeButton","find","item","_id","handleLikeCard","increaseImage","owner","deleteCard","then","data","console","log","removeCard","catch","err","handleDeleteCard","hideInputError","formElement","inputElement","validationConfig","errorElement","concat","inputErrorClass","errorClass","toggleButtonState","inputList","buttonElement","some","validity","valid","hasInvalidInput","inactiveButtonClass","enableValidation","Array","from","querySelectorAll","formSelector","forEach","preventDefault","inputSelector","submitButtonSelector","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListeners","clearValidation","config","placesList","popups","popupProfile","popupNewCard","popupImage","popupImageText","popupTypeImage","avatarChangePopup","profileTitle","profileDescription","profileImage","editButton","profileAddButton","buttons","newPlaceForm","forms","newPlace","editProfileForm","editProfile","nameInput","jobInput","description","profileImageForm","renderLoading","isLoading","innerText","cardId","fetch","method","headers","authorization","res","ok","json","Promise","reject","status","id","putLike","image","text","all","about","style","avatar","append","value","body","JSON","stringify","reset","finally","_ref","newPlaceCard","prepend"],"sourceRoot":""}